SET MODE MySQL;
-- 인기 제품 테이블 생성
CREATE TABLE IF NOT EXISTS today_best_product (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(255) NOT NULL COMMENT '상품명',
    cnt INT NOT NULL DEFAULT 0 COMMENT '판매수량',
    reg_date DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '등록일시'
);

-- 실제 판매 데이터 테이블 생성
CREATE TABLE IF NOT EXISTS sales (
    id INT AUTO_INCREMENT PRIMARY KEY,
    product_name VARCHAR(255) NOT NULL COMMENT '상품명',
    quantity INT NOT NULL DEFAULT 0 COMMENT '판매수량',
    sale_date DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '판매일시'
);

-- 실제 판매 데이터 삽입 (최근 7일간의 데이터)
INSERT INTO sales (product_name, quantity, sale_date) VALUES
-- 오늘 (2025-08-08) 판매 데이터
('Leica Q3', 25, '2025-08-08 09:30:00'),
('Leica Q3', 20, '2025-08-08 14:20:00'),
('Leica Q3', 15, '2025-08-08 16:45:00'),
('Leica M11‑P', 18, '2025-08-08 10:15:00'),
('Leica M11‑P', 12, '2025-08-08 15:30:00'),
('Leica D‑Lux8', 10, '2025-08-08 11:00:00'),
('Leica D‑Lux8', 8, '2025-08-08 17:20:00'),
('Leica SL3', 9, '2025-08-08 12:30:00'),
('Leica SL3', 6, '2025-08-08 18:45:00'),
('Leica M6', 7, '2025-08-08 13:15:00'),
('Leica M6', 5, '2025-08-08 19:30:00'),

-- 어제 (2025-08-07) 판매 데이터
('Leica Q3', 15, '2025-08-07 09:30:00'),
('Leica Q3', 12, '2025-08-07 14:20:00'),
('Leica Q3', 8, '2025-08-07 16:45:00'),
('Leica M11‑P', 10, '2025-08-07 10:15:00'),
('Leica M11‑P', 7, '2025-08-07 15:30:00'),
('Leica D‑Lux8', 6, '2025-08-07 11:00:00'),
('Leica D‑Lux8', 4, '2025-08-07 17:20:00'),
('Leica SL3', 5, '2025-08-07 12:30:00'),
('Leica SL3', 3, '2025-08-07 18:45:00'),
('Leica M6', 4, '2025-08-07 13:15:00'),
('Leica M6', 2, '2025-08-07 19:30:00'),

-- 그제 (2025-08-06) 판매 데이터
('Leica Q3', 18, '2025-08-06 09:45:00'),
('Leica Q3', 14, '2025-08-06 14:10:00'),
('Leica M11‑P', 12, '2025-08-06 10:30:00'),
('Leica M11‑P', 9, '2025-08-06 15:45:00'),
('Leica D‑Lux8', 8, '2025-08-06 11:20:00'),
('Leica SL3', 6, '2025-08-06 12:50:00'),
('Leica M6', 5, '2025-08-06 13:40:00'),

-- 3일 전 (2025-08-05) 판매 데이터
('Leica Q3', 20, '2025-08-05 09:20:00'),
('Leica Q3', 16, '2025-08-05 14:30:00'),
('Leica M11‑P', 15, '2025-08-05 10:45:00'),
('Leica D‑Lux8', 10, '2025-08-05 11:15:00'),
('Leica SL3', 8, '2025-08-05 12:25:00'),
('Leica M6', 7, '2025-08-05 13:35:00'),

-- 4일 전 (2025-08-04) 판매 데이터
('Leica Q3', 22, '2025-08-04 09:10:00'),
('Leica Q3', 18, '2025-08-04 14:50:00'),
('Leica M11‑P', 16, '2025-08-04 10:25:00'),
('Leica D‑Lux8', 12, '2025-08-04 11:40:00'),
('Leica SL3', 10, '2025-08-04 12:15:00'),
('Leica M6', 9, '2025-08-04 13:50:00'),

-- 5일 전 (2025-08-03) 판매 데이터
('Leica Q3', 25, '2025-08-03 09:05:00'),
('Leica Q3', 20, '2025-08-03 14:20:00'),
('Leica M11‑P', 18, '2025-08-03 10:35:00'),
('Leica D‑Lux8', 15, '2025-08-03 11:25:00'),
('Leica SL3', 12, '2025-08-03 12:40:00'),
('Leica M6', 11, '2025-08-03 13:15:00'),

-- 6일 전 (2025-08-02) 판매 데이터
('Leica Q3', 28, '2025-08-02 09:15:00'),
('Leica Q3', 24, '2025-08-02 14:40:00'),
('Leica M11‑P', 20, '2025-08-02 10:50:00'),
('Leica D‑Lux8', 18, '2025-08-02 11:30:00'),
('Leica SL3', 15, '2025-08-02 12:45:00'),
('Leica M6', 14, '2025-08-02 13:25:00'),

-- 7일 전 (2025-08-01) 판매 데이터
('Leica Q3', 30, '2025-08-01 09:00:00'),
('Leica Q3', 26, '2025-08-01 14:15:00'),
('Leica M11‑P', 22, '2025-08-01 10:40:00'),
('Leica D‑Lux8', 20, '2025-08-01 11:10:00'),
('Leica SL3', 18, '2025-08-01 12:35:00'),
('Leica M6', 16, '2025-08-01 13:45:00');

-- 초기 베스트 상품 데이터 (스케줄러가 실행되기 전까지 사용)
INSERT INTO today_best_product (title, cnt, reg_date) VALUES
('Leica Q3', 91, NOW()),
('Leica M11‑P', 85, NOW()),
('Leica D‑Lux8', 72, NOW()),
('Leica SL3', 68, NOW()),
('Leica M6', 65, NOW()),
('Leica M10-R', 58, NOW()),
('Leica Q2', 55, NOW()),
('Leica SL2', 52, NOW()),
('Leica M-A', 48, NOW()),
('Leica CL', 45, NOW()); 